
<!doctype html>
<html lang="en">

<head>
  <title>SmogBeGone</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
  <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/indexstyle.css">

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
</head>

<body>
  <nav id="nav" class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="#">SmogBeGone <img id="logo" src="/assets/images/wind2.png" alt="logo"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="about.html">About</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            More
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="#">Donate</a>
            <a class="dropdown-item" href="#">References</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Meet Adam</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">Coming Soon!</a>
        </li>
      </ul>
    </div>
  </nav>


  <main class="row">
    <div class="col-6">
      <di>
        <h3>Be notified when the air is bad!</h3>
      </di>
      <div class="card shadow-lg p-3 mb-5 bg-white rounded" id="mainCard"style="width: auto;">
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
          </ol>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img class="d-block w-100" src="assets/images/draper.jpg" alt="First slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="assets/images/draper2.jpg" alt="Second slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="assets/images/inversion.jpg" alt="Third slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="assets/images/air3.jpg" alt="Forth slide">
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      
      <div class="card-body">
        <p class="card-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos explicabo praesentium
          possimus dolore voluptas saepe aperiam reiciendis rem at numquam incidunt illo voluptatum pariatur nam omnis,
          maxime laborum consequatur quo adipisci amet alias ea debitis nostrum. Debitis, sed ducimus ullam consequatur
          aliquam velit voluptatem totam quidem aspernatur temporibus enim?</p>
      </div>
      </div>
    </div>
  

    <div class="col-6" id="mapid"></div>



  </main>



  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->



  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>

  <script>
    var mymap = L.map('mapid').setView([39.3210, -111.0937], 8);
    var marker = L.marker([51.5, -0.09]).addTo(mymap);
    var testmarker = L.marker([40.715279, -124.201393]).addTo(mymap)


    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidmFzaGVyeSIsImEiOiJjanA4eGFlcHEwMTk5M3ZtOGd1cDNvNGtpIn0.NTgjq3RtaFskoyWeOEB10A', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      id: 'mapbox.streets',
      accessToken: 'your.mapbox.access.token'
    }).addTo(mymap);

    function onMapClick(e) {
      var newmarker = L.marker(e.latlng).addTo(mymap);

      //alert("You clicked the map at " + e.latlng);
      L.popup()
        .setLatLng(e.latlng)
        .setContent(e.latlng)
        .openOn(mymap);
    }


    mymap.on('click', onMapClick);


    var latValue = 39.3210
    var longValue = -111.0937

    var apiurl = "https://api.breezometer.com/air-quality/v2/current-conditions?lat=" + latValue + "&lon=" + longValue + "&key=6fa2adc95b8c4b23bd7e05f4cd313cf1"

    var settings = {
      "async": true,
      "crossDomain": true,
      "url": apiurl,
      "method": "GET"
    }

    $.ajax(settings).done(function (response) {
      aiq = response.data.indexes.baqi.aqi
      //var popup = L.popup().setLatLng([latValue, longValue]).setContent("The AIQ vlaue of this coordinate is: " + aiq).openOn(mymap);

    })


    var apiurl2 = "https://api.aerisapi.com/airquality/salt lake city, ut?&format=json&client_id=JwgqhYQhvLurMFgNtLWIa&client_secret=3lHajUM0DM5qsTR7YcG61U6tAxeDDie5tN85BbCV"

    var settings = {
      "async": true,
      "crossDomain": true,
      "url": apiurl2,
      "method": "GET"
    }

    $.ajax(settings).done(function (response) {
      stationsarray = response.response[0].profile.stations
      for (var i = 0; i < stationsarray.length; i++) {
        stationid = stationsarray[i];
        var apiurl3 = "https://api.aerisapi.com/airquality/" + stationid + "?&format=json&client_id=JwgqhYQhvLurMFgNtLWIa&client_secret=3lHajUM0DM5qsTR7YcG61U6tAxeDDie5tN85BbCV"

        var settings = {
          "async": true,
          "crossDomain": true,
          "url": apiurl3,
          "method": "GET"
        }

        $.ajax(settings).done(function (response) {
          var latValue = response.response.loc.lat
          var longValue = response.response.loc.long
          var aqi = response.response.periods[0].aqi
          var newpopup = L.popup()
            .setLatLng([latValue, longValue])
            .setContent("aqi value is " + aqi)
            .addTo(mymap);
        })

      }

    })


  </script>


</body>

</html>